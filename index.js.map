{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '51358169-fa0c0ba6de1b0bb5150f64058';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query) {\n  if (!query || query.trim() === '') {\n    throw new Error('Search query cannot be empty');\n  }\n\n  const params = {\n    key: API_KEY,\n    q: query.trim(),\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 40,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n\n    if (!response.data || !Array.isArray(response.data.hits)) {\n      throw new Error('Invalid response from Pixabay API');\n    }\n\n    return response.data;\n  } catch (error) {\n    if (error.response) {\n      const status = error.response.status;\n      const message = error.response.data?.error || error.message;\n\n      switch (status) {\n        case 400:\n          throw new Error('Invalid search parameters');\n        case 403:\n          throw new Error('Invalid API key or access denied');\n        case 429:\n          throw new Error('Rate limit exceeded. Please try again later');\n        default:\n          throw new Error(`Pixabay API error: ${status} - ${message}`);\n      }\n    } else if (error.request) {\n      throw new Error('Network error: Unable to connect to Pixabay API');\n    } else {\n      throw new Error(`Error: ${error.message}`);\n    }\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst galleryEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\n\n// Перевірка наявності елементів з повідомленням\nif (!galleryEl) {\n  iziToast.error({\n    title: 'Gallery not found',\n    message: 'Element with class \"gallery\" is missing from the page.',\n    position: 'topRight',\n  });\n  console.error('Gallery element not found!');\n}\n\nif (!loaderEl) {\n  iziToast.error({\n    title: 'Loader not found',\n    message: 'Element with class \"loader\" is missing from the page.',\n    position: 'topRight',\n  });\n  console.error('Loader element not found!');\n}\n\n// Ініціалізація SimpleLightbox з обробкою помилок\nlet lightbox;\n\ntry {\n  lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n} catch (err) {\n  iziToast.error({\n    title: 'Lightbox Error',\n    message: `Failed to initialize lightbox: ${err.message}`,\n    position: 'topRight',\n  });\n  console.error('SimpleLightbox initialization error:', err);\n}\n\nexport function createGallery(images) {\n  if (!Array.isArray(images) || images.length === 0) {\n    iziToast.info({\n      title: 'No Images',\n      message: 'No images found to display.',\n      position: 'topRight',\n    });\n    console.warn('No images to display');\n    return;\n  }\n\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" loading=\"lazy\">\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\"><b>Likes:</b> ${likes}</p>\n          <p class=\"info-item\"><b>Views:</b> ${views}</p>\n          <p class=\"info-item\"><b>Comments:</b> ${comments}</p>\n          <p class=\"info-item\"><b>Downloads:</b> ${downloads}</p>\n        </div>\n      </li>`\n    )\n    .join('');\n\n  galleryEl?.insertAdjacentHTML('beforeend', markup);\n\n  try {\n    lightbox?.refresh();\n  } catch (err) {\n    iziToast.warning({\n      title: 'Lightbox Update Failed',\n      message: 'Unable to refresh image preview.',\n      position: 'topRight',\n    });\n    console.error('Lightbox refresh error:', err);\n  }\n}\n\nexport function clearGallery() {\n  if (galleryEl) {\n    galleryEl.innerHTML = '';\n  } else {\n    iziToast.warning({\n      title: 'Gallery Missing',\n      message: 'Cannot clear gallery — element is missing.',\n      position: 'topRight',\n    });\n  }\n}\n\nexport function showLoader() {\n  if (loaderEl) {\n    loaderEl.classList.remove('is-hidden');\n  } else {\n    iziToast.warning({\n      title: 'Loader Missing',\n      message: 'Cannot show loader — element is missing.',\n      position: 'topRight',\n    });\n  }\n}\n\nexport function hideLoader() {\n  if (loaderEl) {\n    loaderEl.classList.add('is-hidden');\n  } else {\n    iziToast.warning({\n      title: 'Loader Missing',\n      message: 'Cannot hide loader — element is missing.',\n      position: 'topRight',\n    });\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n} from './js/render-functions';\n\nconst formEl = document.querySelector('.form');\n\n// Перевірка наявності форми\nif (!formEl) {\n  iziToast.error({\n    title: 'Form Missing',\n    message: 'Form element with class \"form\" not found on the page.',\n    position: 'topRight',\n  });\n  console.error('Form element not found!');\n}\n\n// Налаштування iziToast (опціонально)\niziToast.settings({\n  timeout: 5000,\n  resetOnHover: true,\n  icon: 'material-icons',\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n});\n\nformEl?.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  const searchInput = formEl.elements['search-text'];\n\n  // Перевірка поля вводу\n  if (!searchInput) {\n    iziToast.error({\n      title: 'Input Missing',\n      message: 'Search input field with name=\"search-text\" not found.',\n      position: 'topRight',\n    });\n    console.error('Search input not found!');\n    return;\n  }\n\n  const query = searchInput.value.trim();\n\n  if (!query) {\n    iziToast.warning({\n      title: 'Empty Input',\n      message: 'Search input must not be empty!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  // Очищення попередньої галереї та показ лоадера\n  clearGallery();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(query);\n\n    if (!data || !data.hits) {\n      throw new Error('Unexpected response structure from API.');\n    }\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'No Results',\n        message: 'No images match your search. Please try another keyword.',\n        position: 'topRight',\n      });\n    } else {\n      createGallery(data.hits);\n\n      iziToast.success({\n        title: 'Success',\n        message: `Found ${data.totalHits} images.`,\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    console.error('Search error:', error);\n\n    iziToast.error({\n      title: 'Request Failed',\n      message: `Something went wrong: ${error.message}`,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n    formEl.reset();\n  }\n});\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","params","response","axios","error","status","message","_a","galleryEl","loaderEl","iziToast","lightbox","SimpleLightbox","err","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","formEl","event","searchInput","data"],"mappings":"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"}