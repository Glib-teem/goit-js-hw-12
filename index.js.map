{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js","../src/js/scroll.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '51358169-fa0c0ba6de1b0bb5150f64058';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nexport async function getImagesByQuery(query, page = 1) {\n  if (!query || query.trim() === '') {\n    throw new Error('Search query cannot be empty');\n  }\n\n  const params = {\n    key: API_KEY,\n    q: query.trim(),\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: PER_PAGE,\n    page,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response?.data?.error || error.message);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst galleryEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet lightbox;\n\n// Ініціалізація lightbox\ntry {\n  lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n} catch (err) {\n  iziToast.error({\n    title: 'Lightbox Error',\n    message: `Failed to initialize lightbox: ${err.message}`,\n    position: 'topRight',\n  });\n}\n\n// Функція для створення розмітки галереї\nexport function createGallery(images) {\n  if (!Array.isArray(images) || images.length === 0) {\n    iziToast.info({\n      title: 'No Images',\n      message: 'No images found to display.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" loading=\"lazy\">\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\"><b>Likes:</b> ${likes}</p>\n          <p class=\"info-item\"><b>Views:</b> ${views}</p>\n          <p class=\"info-item\"><b>Comments:</b> ${comments}</p>\n          <p class=\"info-item\"><b>Downloads:</b> ${downloads}</p>\n        </div>\n      </li>`\n    )\n    .join('');\n\n  galleryEl?.insertAdjacentHTML('beforeend', markup);\n\n  try {\n    lightbox?.refresh();\n  } catch (err) {\n    iziToast.warning({\n      title: 'Lightbox Update Failed',\n      message: 'Unable to refresh image preview.',\n      position: 'topRight',\n    });\n  }\n}\n\n// Очищення галереї\nexport function clearGallery() {\n  if (galleryEl) {\n    galleryEl.innerHTML = '';\n  }\n}\n\n// Показ/приховування лоадера\nexport function showLoader() {\n  loaderEl?.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n  loaderEl?.classList.add('is-hidden');\n}\n\n// Показ/приховування кнопки Load More\nexport function showLoadMoreButton() {\n  loadMoreBtn?.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn?.classList.add('is-hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nconst formEl = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\nlet loadedImages = 0;\n\nformEl?.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  const searchInput = formEl.elements['search-text'];\n  query = searchInput.value.trim();\n  page = 1;\n  loadedImages = 0;\n\n  if (!query) {\n    iziToast.warning({\n      title: 'Empty Input',\n      message: 'Search input must not be empty!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(query, page);\n    totalHits = data.totalHits;\n    const images = data.hits;\n\n    if (images.length === 0) {\n      iziToast.info({\n        title: 'No Results',\n        message: 'No images found. Try another keyword.',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    createGallery(images);\n    loadedImages += images.length;\n\n    iziToast.success({\n      title: 'Success',\n      message: `Found ${totalHits} images.`,\n      position: 'topRight',\n    });\n\n    if (loadedImages < totalHits) {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n    formEl.reset();\n  }\n});\n\nloadMoreBtn?.addEventListener('click', async () => {\n  page += 1;\n  showLoader();\n  hideLoadMoreButton();\n\n  try {\n    const data = await getImagesByQuery(query, page);\n    const images = data.hits;\n\n    createGallery(images);\n    loadedImages += images.length;\n\n    // Плавний scroll\n    const card = document.querySelector('.gallery-item');\n    const cardHeight = card?.getBoundingClientRect().height || 200;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (loadedImages >= totalHits) {\n      hideLoadMoreButton();\n      iziToast.info({\n        title: 'End of Results',\n        message: `We're sorry, but you've reached the end of search results.`,\n        position: 'topRight',\n      });\n    } else {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Load Failed',\n      message: error.message,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n","const scrollBtn = document.getElementById('scrollToTop');\n\n// Показує кнопку при прокрутці\nwindow.addEventListener('scroll', () => {\n  if (window.scrollY > 400) {\n    scrollBtn.classList.remove('is-hidden');\n  } else {\n    scrollBtn.classList.add('is-hidden');\n  }\n});\n\n// Плавна прокрутка нагору\nscrollBtn.addEventListener('click', () => {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n});\n"],"names":["API_KEY","BASE_URL","PER_PAGE","getImagesByQuery","query","page","params","axios","error","_b","_a","galleryEl","loaderEl","loadMoreBtn","lightbox","SimpleLightbox","err","iziToast","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","formEl","totalHits","loadedImages","event","data","card","cardHeight","scrollBtn"],"mappings":"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"}